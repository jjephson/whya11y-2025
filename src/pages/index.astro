---
import BlogLayout from '../layouts/BlogLayout.astro';
import ContentCard from '../components/ContentCard.astro';
import { getCollection } from 'astro:content';

const articles = await getCollection('articles');
const codeExamples = await getCollection('codeExamples');

// Get the most recent articles and code examples
const recentArticles = articles
	.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
	.slice(0, 3);

const recentCodeExamples = codeExamples
	.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
	.slice(0, 3);
---

<BlogLayout title="Home | WhyA11y">
	<section class="hero">
		<h1>Making the Web Accessible for Everyone</h1>
		<p class="hero-subtitle">
			Learn why accessibility matters and how to implement it in your web projects. 
			From semantic HTML to ARIA patterns, discover practical solutions for creating 
			inclusive digital experiences.
		</p>
		<div class="hero-actions">
			<a href="/why-a11y" class="btn btn-primary">Why Accessibility?</a>
			<a href="/articles" class="btn btn-primary">Browse Articles</a>
		</div>
	</section>
	<section class="featured-content" id="featured-content">
		<div class="content-grid">
			<div class="content-section">
				<h2>Latest Articles</h2>
				<p>Explore our latest insights on web accessibility best practices and techniques.</p>
				<div class="content-list">
					{recentArticles.map((article) => (
						<ContentCard
							title={article.data.title}
							description={article.data.description}
							href={`/articles/${article.slug}`}
							date={article.data.date}
							headingLevel="h3"
						/>
					))}
				</div>
				<a href="/articles" class="view-all">View all articles →</a>
			</div>
			<div class="content-section">
				<h2>Code Examples</h2>
				<p>Ready-to-use code examples that demonstrate accessible patterns and techniques.</p>
				<div class="content-list">
					{recentCodeExamples.map((example) => (
						<ContentCard
							title={example.data.title}
							description={example.data.description}
							href={`/code-examples/${example.slug}`}
							date={example.data.date}
							headingLevel="h3"
						/>
					))}
				</div>
				<a href="/code-examples" class="view-all">View all code examples →</a>
			</div>
		</div>
	</section>
	<section class="about-section">
		<h2>About WhyA11y</h2>
		<p>
			WhyA11y is your resource for understanding and implementing web accessibility. 
			We believe that digital experiences should be inclusive for everyone, regardless 
			of ability or assistive technology. Our believe is that basic accessibility needs to be 
			taught from the start, and that's why we're here.
		</p>
		<div class="features">
			<div class="feature">
				<h3>Practical Examples</h3>
				<p>Real code examples that demonstrate accessible patterns and techniques.</p>
			</div>
			<div class="feature">
				<h3>In-Depth Articles</h3>
				<p>Detailed articles covering accessibility concepts and implementation strategies.</p>
			</div>
			<div class="feature">
				<h3>Standards Compliance</h3>
				<p>Information about WCAG guidelines and EN 301 549 requirements.</p>
			</div>
		</div>
	</section>
</BlogLayout>

<style>
	.hero {
		text-align: center;
		padding: 1.5rem 0 0;
		max-width: 800px;
		margin: 0 auto;
	}
	.hero h1 {
		font-size: var(--text-5xl);
		margin-bottom: var(--spacing-md);
		color: var(--fg);
	}
	.hero-subtitle {
		font-size: var(--text-xl);
		line-height: var(--leading-relaxed);
		margin: 0 0 var(--spacing-xl);
		color: var(--fg-muted);
	}
	.hero-actions {
		display: flex;
		gap: 1rem;
		justify-content: center;
		flex-wrap: wrap;
	}
	.btn {
		display: inline-block;
		padding: var(--spacing-md) var(--spacing-xl);
		border-radius: var(--radius-md);
		text-decoration: none;
		transition: all 0.2s ease;
		border: 2px solid transparent;
	}
	.btn-primary {
		background: var(--accent-primary);
		color: white;
		border-color: var(--accent-primary);
	}
	.btn-primary:hover {
		background: var(--link-hover);
		border-color: var(--link-hover);
	}
	.featured-content {
		margin: 2rem 0 3rem;
	}
	.content-grid {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 3rem;
		max-width: 1200px;
	}
	.content-section h2 {
		margin: 0 0 .5rem;
		color: var(--fg);
	}
	.content-section > p {
		margin: 0 0 1.5rem;
		color: var(--fg-muted);
	}
	.content-list {
		display: flex;
		flex-direction: column;
		gap: 1.5rem;
	}
	.view-all {
		display: inline-block;
		margin-top: 1rem;
		color: var(--fg);
		text-decoration: underline;
		text-decoration-color: var(--accent-primary);
		text-underline-offset: 0.2em;
		text-decoration-thickness: 2px;
		font-weight: 500;
	}
	.view-all:hover,
	.view-all:focus,
	.view-all:active {
		color: var(--text-on-accent);
		text-decoration-color: var(--text-on-accent);
		text-decoration-thickness: 3px;
	}
	.about-section {
		padding: 3rem 0;
		border-top: 1px solid var(--border);
		text-align: center;
	}
	.about-section h2 {
		margin-bottom: 1rem;
		color: var(--fg);
	}
	.about-section > p {
		max-width: 600px;
		margin: 0 auto 3rem auto;
		line-height: 1.6;
		color: var(--fg-muted);
	}
	.features {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
		gap: 2rem;
		max-width: 900px;
		margin: 0 auto;
	}
	.feature {
		padding: 1rem;
		text-align: center;
	}
	.feature h3 {
		margin-bottom: 0.5rem;
		color: var(--fg);
	}
	.feature p {
		color: var(--fg-muted);
		line-height: 1.5;
	}
	@media (max-width: 768px) {
		.content-grid {
			grid-template-columns: 1fr;
			gap: 2rem;
		}
		.hero h1 {
			font-size: 2rem;
		}
		.hero-subtitle {
			font-size: 1rem;
		}
		.hero-actions {
			flex-direction: column;
			align-items: center;
		}
		.btn {
			width: 100%;
			max-width: 250px;
			text-align: center;
		}
		.features {
			gap: 0
		}
	}
</style>