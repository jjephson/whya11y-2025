---
import BlogLayout from '../layouts/BlogLayout.astro';
import ContentCard from '../components/ContentCard.astro';
import Search from '../components/Search.astro';
import { getCollection } from 'astro:content';

const articles = await getCollection('articles');
const codeExamples = await getCollection('codeExamples');

// Function to shuffle array and get random items
function getRandomItems<T>(array: T[], count: number): T[] {
	const shuffled = [...array].sort(() => Math.random() - 0.5);
	return shuffled.slice(0, count);
}

// Get 3 random articles and 3 random code examples
const randomArticles = getRandomItems(articles, 3);
const randomCodeExamples = getRandomItems(codeExamples, 3);
---

<BlogLayout 
	title="Home"
	description="Learn why accessibility matters and how to implement it in your web projects. Discover practical solutions for creating inclusive digital experiences with our articles and code examples."
>
	<section class="hero">
		<h1>Making the Web Accessible for Everyone</h1>
		<p class="hero-subtitle">
			Learn why accessibility matters and how to implement it in your web projects. 
			Start with the basics of HTML, it's the foundation every developer needs. 
			From semantic HTML to ARIA patterns, discover practical solutions for creating 
			inclusive digital experiences.
		</p>
		<div class="hero-actions">
			<a href="/why-a11y" class="btn btn-primary">Why Accessibility?</a>
			<a href="/articles" class="btn btn-primary">Browse Articles</a>
		</div>
	</section>

	<section class="search-section">
		<h2>Find What You Need</h2>
		<p>Search our articles, code examples, and resources to find the accessibility information you're looking for.</p>
		<Search />
	</section>

	<section class="featured-content" id="featured-content">
		<div class="content-grid">
			<div class="content-section">
				<h2>Latest Articles</h2>
				<p>Explore the latest insights on web accessibility best practices and techniques.</p>
				<div class="content-list">
					{randomArticles.map((article) => (
						<ContentCard
							title={article.data.title}
							description={article.data.description}
							href={`/articles/${article.slug}`}
							date={article.data.date}
							headingLevel="h3"
						/>
					))}
				</div>
				<a href="/articles" class="view-all">View all articles →</a>
			</div>
			<div class="content-section">
				<h2>Code Examples</h2>
				<p>Basic accessible code examples you can use right now to make your sites more accessible.</p>
				<div class="content-list">
					{randomCodeExamples.map((example) => (
						<ContentCard
							title={example.data.title}
							description={example.data.description}
							href={`/code-examples/${example.slug}`}
							date={example.data.date}
							headingLevel="h3"
						/>
					))}
				</div>
				<a href="/code-examples" class="view-all">View all code examples →</a>
			</div>
		</div>
	</section>
	<section class="about-section">
		<h2>About Why a11y?</h2>
		<p>
			WhyA11y is your resource for understanding and implementing web accessibility. 
			I believe that digital experiences should be inclusive for everyone, regardless 
			of ability or assistive technology. As a developer HTML should be the first language 
			you learn, and accessibility should be the first thing you learn about it.
		</p>
		<div class="features">
			<div class="feature">
				<h3>Practical Examples</h3>
				<p>Real code examples that demonstrate accessible patterns and techniques.</p>
			</div>
			<div class="feature">
				<h3>In-Depth Articles</h3>
				<p>Detailed articles covering accessibility concepts and implementation strategies.</p>
			</div>
			<div class="feature">
				<h3>Standards Compliance</h3>
				<p>Information about WCAG guidelines and EN 301 549 requirements.</p>
			</div>
		</div>
	</section>
</BlogLayout>

<style>
	.hero {
		text-align: center;
		padding: var(--spacing-3xl) 0;
		max-width: var(--container-md);
		margin: 0 auto;
	}

	.hero h1 {
		font-size: var(--text-5xl);
		margin-bottom: var(--spacing-xl);
		color: var(--fg);
		line-height: var(--leading-tight);
	}

	.hero-subtitle {
		font-size: var(--text-xl);
		line-height: var(--leading-relaxed);
		color: var(--fg-muted);
		margin-bottom: var(--spacing-2xl);
	}

	.hero-actions {
		display: flex;
		gap: var(--spacing-md);
		justify-content: center;
		flex-wrap: wrap;
	}

	.btn {
		display: inline-block;
		padding: var(--spacing-md) var(--spacing-xl);
		border-radius: var(--radius-md);
		text-decoration: none;
		font-weight: 600;
		transition: all 0.2s ease;
		border: 2px solid transparent;
	}

	.btn-primary {
		background: var(--accent-primary);
		color: var(--text-on-accent);
		border-color: var(--accent-primary);
	}

	.btn-primary:hover,
	.btn-primary:focus {
		background: var(--accent-primary);
		color: var(--text-on-accent);
		transform: translateY(-2px);
		box-shadow: var(--shadow-lg);
	}

	.search-section {
		text-align: center;
		padding: var(--spacing-3xl) 0;
		background: var(--bg-muted);
		margin: var(--spacing-3xl) 0;
		border-radius: var(--radius-lg);
	}

	.search-section h2 {
		margin-bottom: var(--spacing-md);
		color: var(--fg);
	}

	.search-section p {
		margin-bottom: var(--spacing-xl);
		color: var(--fg-muted);
		font-size: var(--text-lg);
	}

	.featured-content {
		padding: var(--spacing-3xl) 0;
	}

	.content-grid {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: var(--spacing-3xl);
		margin-bottom: var(--spacing-3xl);
	}

	.content-section h2 {
		margin-bottom: var(--spacing-md);
		color: var(--fg);
	}

	.content-section p {
		margin-bottom: var(--spacing-xl);
		color: var(--fg-muted);
		font-size: var(--text-lg);
	}

	.content-list {
		display: flex;
		flex-direction: column;
		gap: var(--spacing-lg);
		margin-bottom: var(--spacing-lg);
	}

	.view-all {
		color: var(--accent-primary);
		text-decoration: underline;
		text-decoration-color: var(--accent-primary);
		text-underline-offset: 0.2em;
		font-weight: 600;
		transition: all 0.2s ease;
	}

	.view-all:hover,
	.view-all:focus {
		color: var(--link-hover);
		text-decoration-color: var(--link-hover);
		text-decoration-thickness: 2px;
	}

	.about-section {
		padding: var(--spacing-3xl) 0;
		background: var(--bg-muted);
		border-radius: var(--radius-lg);
		text-align: center;
	}

	.about-section h2 {
		margin-bottom: var(--spacing-lg);
		color: var(--fg);
	}

	.about-section p {
		max-width: var(--container-md);
		margin: 0 auto var(--spacing-2xl);
		font-size: var(--text-lg);
		line-height: var(--leading-relaxed);
		color: var(--fg-muted);
	}

	.features {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
		gap: var(--spacing-xl);
		max-width: var(--container-lg);
		margin: 0 auto;
		padding: 0 var(--spacing-lg);
	}

	.feature {
		background: var(--bg);
		padding: var(--spacing-xl);
		border-radius: var(--radius-md);
		border: 1px solid var(--border);
	}

	.feature h3 {
		margin-bottom: var(--spacing-md);
		color: var(--fg);
	}

	.feature p {
		color: var(--fg-muted);
		line-height: var(--leading-relaxed);
		margin: 0;
	}

	@media (max-width: 768px) {
		.hero h1 {
			font-size: var(--text-4xl);
		}

		.hero-subtitle {
			font-size: var(--text-lg);
		}

		.hero-actions {
			flex-direction: column;
			align-items: center;
		}

		.content-grid {
			grid-template-columns: 1fr;
			gap: var(--spacing-2xl);
		}

		.features {
			grid-template-columns: 1fr;
			gap: var(--spacing-lg);
		}

		.search-section {
			margin: var(--spacing-2xl) 0;
			padding: var(--spacing-2xl) var(--spacing-lg);
		}
	}

	@media (max-width: 480px) {
		.hero {
			padding: var(--spacing-2xl) var(--spacing-lg);
		}

		.hero h1 {
			font-size: var(--text-3xl);
		}

		.btn {
			padding: var(--spacing-sm) var(--spacing-lg);
			font-size: var(--text-sm);
		}
	}
</style>