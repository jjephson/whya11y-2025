---
import BlogLayout from '../layouts/BlogLayout.astro';
import { getCollection } from 'astro:content';

const articles = await getCollection('articles');
const codeExamples = await getCollection('codeExamples');

// Get the most recent articles and code examples
const recentArticles = articles
	.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
	.slice(0, 3);

const recentCodeExamples = codeExamples
	.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
	.slice(0, 3);
---

<BlogLayout title="Home | WhyA11y">
	<section class="hero">
		<h1>Making the Web Accessible for Everyone</h1>
		<p class="hero-subtitle">
			Learn why accessibility matters and how to implement it in your web projects. 
			From semantic HTML to ARIA patterns, discover practical solutions for creating 
			inclusive digital experiences.
		</p>
		<div class="hero-actions">
			<a href="/why-a11y" class="btn btn-primary">Why Accessibility?</a>
			<a href="/articles" class="btn btn-secondary">Browse Articles</a>
		</div>
	</section>
	<section class="featured-content" id="featured-content">
		<div class="content-grid">
			<div class="content-section">
				<h2>Latest Articles</h2>
				<p>Explore our latest insights on web accessibility best practices and techniques.</p>
				<div class="content-list">
					{recentArticles.map((article) => (
						<article class="content-card">
							<h3><a href={`/articles/${article.slug}`}>{article.data.title}</a></h3>
							<p>{article.data.description}</p>
							<time datetime={article.data.date}>{new Date(article.data.date).toLocaleDateString()}</time>
						</article>
					))}
				</div>
				<a href="/articles" class="view-all">View all articles ‚Üí</a>
			</div>
			<div class="content-section">
				<h2>Code Examples</h2>
				<p>Practical, accessible code snippets you can use in your projects today.</p>
				<div class="content-list">
					{recentCodeExamples.map((example) => (
						<article class="content-card">
							<h3><a href={`/code-examples/${example.slug}`}>{example.data.title}</a></h3>
							<p>{example.data.description}</p>
							<time datetime={example.data.date}>{new Date(example.data.date).toLocaleDateString()}</time>
						</article>
					))}
				</div>
				<a href="/code-examples" class="view-all">View all code examples ‚Üí</a>
			</div>
		</div>
	</section>
	<section class="about-section">
		<h2>About WhyA11y</h2>
		<p>
			WhyA11y is your resource for understanding and implementing web accessibility. 
			We believe that digital experiences should be inclusive for everyone, regardless 
			of ability or assistive technology. Our content covers everything from basic 
			accessibility principles to advanced implementation techniques.
		</p>
		<div class="features">
			<div class="feature">
				<h3>üéØ Practical Examples</h3>
				<p>Real code examples that demonstrate accessible patterns and techniques.</p>
			</div>
			<div class="feature">
				<h3>üìö In-Depth Articles</h3>
				<p>Comprehensive guides on accessibility topics and best practices.</p>
			</div>
			<div class="feature">
				<h3>‚öñÔ∏è Standards Compliance</h3>
				<p>Information about WCAG guidelines and EN 301 549 requirements.</p>
			</div>
		</div>
	</section>
</BlogLayout>

<style>
	.hero {
		text-align: center;
		padding: 1.5rem 0 0;
		max-width: 800px;
		margin: 0 auto;
	}
	.hero h1 {
		font-size: 2.5rem;
		margin-bottom: 1rem;
		color: var(--fg);
	}
	.hero-subtitle {
		font-size: 1.2rem;
		line-height: 1.6;
		margin: 0 0 2rem;
		color: var(--fg-muted);
	}
	.hero-actions {
		display: flex;
		gap: 1rem;
		justify-content: center;
		flex-wrap: wrap;
	}
	.btn {
		display: inline-block;
		padding: .75rem 1.5rem;
		border-radius: .5rem;
		text-decoration: none;
		transition: all 0.2s ease;
		border: 2px solid transparent;
	}
	.btn-primary {
		background: var(--accent-primary) !important;
		color: white !important;
		border-color: var(--accent-primary) !important;
	}
	.btn-primary:hover {
		background: var(--link-hover) !important;
		border-color: var(--link-hover) !important;
		transform: translateY(-1px);
	}
	.btn-secondary {
		background: transparent !important;
		color: var(--accent-primary) !important;
		border-color: var(--accent-primary) !important;
	}
	.btn-secondary:hover {
		background: var(--accent-primary) !important;
		color: white !important;
		border-color: var(--accent-primary) !important;
		transform: translateY(-1px);
	}
	.featured-content {
		margin: 2rem 0 3rem;
	}
	.content-grid {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 3rem;
		max-width: 1200px;
	}
	.content-section h2 {
		margin: 0 0 .5rem;
		color: var(--fg);
	}
	.content-section > p {
		margin: 0 0 1.5rem;
		color: var(--fg-muted);
	}
	.content-list {
		display: flex;
		flex-direction: column;
		gap: 1.5rem;
	}
	.content-card {
		padding: 1.5rem;
		border: 1px solid var(--border);
		border-radius: .5rem;
		background: var(--bg);
		transition: all 0.2s ease;
	}
	.content-card:hover {
		border-color: var(--accent-primary);
		box-shadow: 0 4px 12px rgba(30, 64, 175, 0.15);
	}
	.content-card h3 {
		margin: 0 0 .5rem 0;
		font-size: 1.1rem;
	}
	.content-card h3 a {
		color: var(--fg);
		text-decoration: underline;
		text-decoration-color: var(--accent-primary);
		text-underline-offset: 0.2em;
		text-decoration-thickness: 2px;
	}
	.content-card h3 a:hover {
		color: var(--accent-primary);
		text-decoration-color: var(--accent-primary);
		text-decoration-thickness: 3px;
	}
	.content-card p {
		margin: 0 0 1rem 0;
		color: var(--fg-muted);
		font-size: 0.9rem;
		line-height: 1.5;
	}
	.content-card time {
		font-size: 0.8rem;
		color: var(--fg-muted);
	}
	.view-all {
		display: inline-block;
		margin-top: 1rem;
		color: var(--fg);
		text-decoration: underline;
		text-decoration-color: var(--accent-primary);
		text-underline-offset: 0.2em;
		text-decoration-thickness: 2px;
		font-weight: 500;
	}
	.view-all:hover {
		color: var(--accent-primary);
		text-decoration-color: var(--accent-primary);
		text-decoration-thickness: 3px;
	}
	.about-section {
		padding: 3rem 0;
		border-top: 1px solid var(--border);
		text-align: center;
	}
	.about-section h2 {
		margin-bottom: 1rem;
		color: var(--fg);
	}
	.about-section > p {
		max-width: 600px;
		margin: 0 auto 3rem auto;
		line-height: 1.6;
		color: var(--fg-muted);
	}
	.features {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
		gap: 2rem;
		max-width: 900px;
		margin: 0 auto;
	}
	.feature {
		padding: 1.5rem;
		text-align: center;
	}
	.feature h3 {
		margin-bottom: 0.5rem;
		color: var(--fg);
	}
	.feature p {
		color: var(--fg-muted);
		line-height: 1.5;
	}
	@media (max-width: 768px) {
		.content-grid {
			grid-template-columns: 1fr;
			gap: 2rem;
		}
		.hero h1 {
			font-size: 2rem;
		}
		.hero-subtitle {
			font-size: 1rem;
		}
		.hero-actions {
			flex-direction: column;
			align-items: center;
		}
		.btn {
			width: 100%;
			max-width: 250px;
			text-align: center;
		}
		.features {
			gap: 0
		}
	}
</style>