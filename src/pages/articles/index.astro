---
import BlogLayout from '../../layouts/BlogLayout.astro';
import ContentCard from '../../components/ContentCard.astro';
import { getCollection } from 'astro:content';

const articles = await getCollection('articles');

// Sort articles by date (newest first)
const sortedArticles = articles.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---

<BlogLayout title="Articles | WhyA11y">
	<section class="page-header">
		<h1>All Articles</h1>
		<p class="page-description">
			Explore our comprehensive guides on web accessibility best practices, techniques, and insights.
		</p>
	</section>
	<section class="articles-grid" id="articles-grid">
		{sortedArticles.map((article) => (
			<ContentCard
				title={article.data.title}
				description={article.data.description}
				href={`/articles/${article.slug}`}
				date={article.data.date}
			/>
		))}
	</section>
</BlogLayout>

<style>
	.page-header {
		text-align: center;
		padding: var(--spacing-xl) 0 var(--spacing-3xl);
		max-width: var(--container-md);
		margin: 0 auto;
	}
	.page-header h1 {
		font-size: var(--text-5xl);
		margin-bottom: var(--spacing-md);
		color: var(--fg);
	}
	.page-description {
		font-size: var(--text-xl);
		line-height: var(--leading-relaxed);
		color: var(--fg-muted);
	}
	.articles-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
		gap: var(--spacing-xl);
		max-width: var(--container-lg);
		margin: 0 auto;
	}

	@media (max-width: 768px) {
		.page-header h1 {
			font-size: var(--text-4xl);
		}
		.page-description {
			font-size: var(--text-base);
		}
		.articles-grid {
			grid-template-columns: 1fr;
			gap: var(--spacing-2xl);
		}

	}
</style> 