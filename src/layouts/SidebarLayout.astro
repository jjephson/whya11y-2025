---
import BaseLayout from './BaseLayout.astro';

export interface Props {
	title?: string;
	description?: string;
	sidebarTitle?: string;
	navItems: Array<{
		id: string;
		title: string;
		href: string;
	}>;
	currentPage: string;
}

const { 
	title = 'WhyA11y', 
	description = 'Making the web accessible for everyone. Learn about web accessibility, WCAG guidelines, and inclusive design practices.',
	sidebarTitle = 'Navigation',
	navItems,
	currentPage
} = Astro.props;
---

<BaseLayout title={title} description={description}>
	<!-- Two Column Layout -->
	<div class="sidebar-layout">
		<!-- Left Navigation Sidebar -->
		<nav class="sidebar-nav" aria-label="Page navigation">
			<div class="sidebar-header">
				<h2>{sidebarTitle}</h2>
			</div>
			<ul class="nav-list">
				{navItems.map((item) => (
					<li>
						<a 
							href={item.href}
							class={currentPage === item.id ? 'active' : ''}
							aria-current={currentPage === item.id ? 'page' : undefined}
						>
							{item.title}
						</a>
					</li>
				))}
			</ul>
		</nav>

		<!-- Main Content Area -->
		<div class="main-content content-area">
			<slot />
		</div>
	</div>
</BaseLayout>

<style>
	/* Two Column Layout */
	.sidebar-layout {
		display: grid;
		grid-template-columns: 300px 1fr;
		gap: var(--spacing-3xl);
		max-width: var(--container-lg);
		margin: 0 auto;
		align-items: start;
	}

	/* Left Sidebar Navigation */
	.sidebar-nav {
		background: var(--bg-muted);
		border-radius: var(--radius-md);
		padding: var(--spacing-lg);
		border: 1px solid var(--border);
		height: fit-content;
		position: sticky;
		top: var(--spacing-xl);
	}

	.sidebar-header h2 {
		font-size: var(--text-xl);
		margin: 0 0 var(--spacing-lg);
		color: var(--fg);
		border-bottom: 2px solid var(--accent-primary);
		padding-bottom: var(--spacing-sm);
	}

	.nav-list {
		list-style: none;
		padding: 0;
		margin: 0;
	}

	.nav-list li {
		margin-bottom: var(--spacing-sm);
	}

	.nav-list a {
		display: block;
		color: var(--fg-muted);
		text-decoration: underline;
		text-decoration-color: var(--accent-primary);
		text-underline-offset: 0.2em;
		text-decoration-thickness: 1px;
		font-size: 0.9rem;
		transition: all 0.2s ease;
		font-weight: 500;
		padding: var(--spacing-sm) 0;
	}

	.nav-list a:hover,
	.nav-list a:focus {
		color: var(--text-on-accent);
		text-decoration-color: var(--text-on-accent);
		text-decoration-thickness: 2px;
	}

	.nav-list a.active {
		background: var(--accent-primary);
		color: var(--text-on-accent);
		font-weight: 600;
		text-decoration: none;
		padding: var(--spacing-sm) var(--spacing-md);
		border-radius: var(--radius-sm);
	}

	.nav-list a.active:hover,
	.nav-list a.active:focus {
		background: var(--accent-primary);
		color: var(--text-on-accent);
		text-decoration: none;
	}

	/* Main Content Area */
	.main-content {
		min-width: 0; /* Prevents grid overflow */
	}

	/* Responsive Design */
	@media (max-width: 1024px) {
		.sidebar-layout {
			grid-template-columns: 1fr;
			gap: var(--spacing-2xl);
		}
		
		.sidebar-nav {
			position: static;
			order: 1; /* Move sidebar after main content on mobile */
		}

		.nav-list {
			display: flex;
			flex-wrap: wrap;
			gap: var(--spacing-sm);
		}

		.nav-list li {
			margin-bottom: 0;
		}

		.nav-list a {
			padding: var(--spacing-sm) var(--spacing-md);
			white-space: nowrap;
		}
	}

	@media (max-width: 768px) {
		.sidebar-nav {
			padding: var(--spacing-md);
		}
		
		.sidebar-header h2 {
			font-size: var(--text-lg);
		}
	}
</style>
